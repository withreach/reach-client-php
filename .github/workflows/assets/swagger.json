{
  "openapi": "3.1.0",
  "info": {
    "title": "Reach's Drop-In API",
    "description": "API definition for Reach's Drop-In API's",
    "version": "1.0.0"
  },
  "servers": [
    {
      "url": "https://api.sandbox.withreach.com"
    },
    {
      "url": "https://api.withreach.com"
    }
  ],
  "tags": [
    {
      "name": "Session",
      "description": "Manage a Session within Reach."
    },
    {
      "name": "Order",
      "description": "Manage a Order within Reach."
    }
  ],
  "paths": {
    "/v1/session": {
      "post": {
        "tags": [
          "Session"
        ],
        "summary": "Create a new Session",
        "operationId": "createSession",
        "security": [
          {
            "basicAuth": []
          }
        ],
        "requestBody": {
          "description": "Session object that needs to be created.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Session"
              },
              "examples": {
                "BasicExample": {
                  "summary": "A basic session creation with valid fields",
                  "value": {
                    "MerchantReference": "b14e4557-accb-a829-b829-c21234175467",
                    "Currency": "CAD",
                    "Items": [
                      {
                        "Name": "Item 1",
                        "Amount": 23,
                        "Quantity": 1
                      },
                      {
                        "Name": "Item 2",
                        "Amount": 10.5,
                        "Quantity": 1
                      },
                      {
                        "Name": "Item 3",
                        "Amount": 5,
                        "Quantity": 1
                      }
                    ],
                    "BillingProfile": {
                      "Name": "First Last",
                      "Email": "email@example.org",
                      "Phone": "4031231234",
                      "Birthdate": "1999-12-31",
                      "Address": {
                        "Street": "123 Street",
                        "City": "City",
                        "Region": "AB",
                        "Country": "CA",
                        "Postcode": "X0X0X0"
                      }
                    },
                    "ShippingDetails": {
                      "ShippingAmount": 20.51,
                      "DutyAmount": 1.11,
                      "Name": "First Last",
                      "Email": "email@example.org",
                      "Phone": "4031231234",
                      "Address": {
                        "Street": "123 Street",
                        "City": "City",
                        "Region": "AB",
                        "Country": "AR",
                        "Postcode": "X0X0X0"
                      }
                    },
                    "TaxAmount": 1.23,
                    "AutoCapture": true,
                    "CompleteUrl": "https://example.org/return/{SessionId}",
                    "CancelUrl": "https://example.org/return/{SessionId}",
                    "Discounts": [
                      {
                        "Name": "Discount descriptor",
                        "Amount": 4.56
                      }
                    ]
                  }
                },
                "Minimal": {
                  "summary": "A request with only the required fields.",
                  "value": {
                    "MerchantReference": "unique_reference_provided_by_merchant",
                    "Currency": "USD",
                    "Items": [
                      {
                        "Name": "Item 1",
                        "Amount": 10.00,
                        "Quantity": 1
                      }
                    ],
                    "BillingProfile": {
                      "Name": "First Last",
                      "Email": "email@example.org",
                      "Address": {
                        "Street": "123 Street",
                        "City": "City",
                        "Country": "ES",
                        "Phone": "4031234567"
                      }
                    },
                    "AutoCapture": true,
                    "CompleteUrl": "https://www.send-user-here-after-success-redirect.com",
                    "CancelUrl": "https://www.send-user-here-after-failed-redirect.com"
                  }
                },
                "Full": {
                  "summary": "A request with all optional fields included",
                  "value": {
                    "MerchantReference": "unique_reference_provided_by_merchant",
                    "Currency": "USD",
                    "Items": [
                      {
                        "Name": "Item 1",
                        "Amount": 10.00,
                        "Quantity": 1
                      },
                      {
                        "Name": "Item 2",
                        "Amount": 12.00,
                        "Quantity": 2
                      }
                    ],
                    "BillingProfile": {
                      "BillingProfileReference": "MerchantSupplied-reference",
                      "Name": "First Last",
                      "Email": "email@example.org",
                      "Birthdate": "1980-01-02",
                      "Company": "Umbrella corp",
                      "NationalIdentifier": "43.236.560/0001-52",
                      "Address": {
                        "Street": "123 Sreet",
                        "City": "City",
                        "Region": "SC",
                        "Country": "BR",
                        "Postcode": "12345678",
                        "Phone": "4031234567"
                      }
                    },
                    "ShippingDetails": {
                      "ShippingAmount": 0.00,
                      "DutyAmount": 0.00,
                      "Name": "First Last",
                      "Email": "email@example.org",
                      "Phone": "4031231234",
                      "Address": {
                        "Street": "123 Sreet",
                        "City": "City",
                        "Region": "AB",
                        "Country": "CA",
                        "Postcode": "X0X0X0"
                      }
                    },
                    "Discounts": [
                      {
                        "Name": "Discount 1",
                        "Amount": 2.00
                      },
                      {
                        "Name": "Discount 2",
                        "Amount": 3.00
                      }
                    ],
                    "TaxAmount": 1.00,
                    "AutoCapture": true,
                    "CompleteUrl": "https://www.send-user-here-after-success-redirect.com",
                    "CancelUrl": "https://www.send-user-here-after-failed-redirect.com",
                    "ViaAgent": false,
                    "Meta": {
                      "TxnId": 1234567,
                      "InternalRefId": "uuid-1234-abcd"
                    }
                  }
                },
                "BillingProfileReference": {
                  "summary": "A request using a BillingProfileReference",
                  "value": {
                    "MerchantReference": "unique_reference_provided_by_merchant",
                    "Currency": "USD",
                    "Items": [
                      {
                        "Name": "Item 1",
                        "Amount": 10.00,
                        "Quantity": 1
                      }
                    ],
                    "BillingProfileReference": "MerchantSupplied-reference",
                    "AutoCapture": true,
                    "CompleteUrl": "https://www.send-user-here-after-success-redirect.com",
                    "CancelUrl": "https://www.send-user-here-after-failed-redirect.com"
                  }
                },
                "BillingProfileId": {
                  "summary": "A request using a BillingProfileId",
                  "value": {
                    "MerchantReference": "unique_reference_provided_by_merchant",
                    "Currency": "USD",
                    "Items": [
                      {
                        "Name": "Item 1",
                        "Amount": 10.00,
                        "Quantity": 1
                      }
                    ],
                    "BillingProfileId": "da7e625b-1d6d-4693-9708-e7bdbcb35df3",
                    "AutoCapture": true,
                    "CompleteUrl": "https://www.send-user-here-after-success-redirect.com",
                    "CancelUrl": "https://www.send-user-here-after-failed-redirect.com"
                  }
                }
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Operation Successful",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Session"
                },
                "example": {
                  "SessionId": "f04c2d83-11fa-405b-b6c3-c74559fd8e61",
                  "State": "CREATED",
                  "MerchantReference": "b14e4557-accb-a829-b829-c21234175467",
                  "Currency": "CAD",
                  "TotalAmount": 43.18,
                  "Items": [
                    {
                      "Name": "Item 1",
                      "Amount": 23,
                      "Quantity": 1
                    },
                    {
                      "Name": "Item 2",
                      "Amount": 10.5,
                      "Quantity": 1
                    },
                    {
                      "Name": "Item 3",
                      "Amount": 5,
                      "Quantity": 1
                    }
                  ],
                  "BillingProfile": {
                    "BillingProfileId": "68bf47c6-787d-4ca2-a904-27870f7e75ef",
                    "Name": "First Last",
                    "Email": "email@example.org",
                    "Phone": "4031231234",
                    "Birthdate": "1999-12-31",
                    "Address": {
                      "Street": "123 Street",
                      "City": "City",
                      "Region": "AB",
                      "Country": "CA",
                      "Postcode": "X0X0X0"
                    }
                  },
                  "ShippingDetails": {
                    "ShippingAmount": 2.34,
                    "DutyAmount": 1.11,
                    "Name": "First Last",
                    "Email": "email@example.org",
                    "Phone": "4031231234",
                    "Address": {
                      "Street": "123 Street",
                      "City": "City",
                      "Region": "AB",
                      "Country": "AR",
                      "Postcode": "X0X0X0"
                    }
                  },
                  "TaxAmount": 1.23,
                  "AutoCapture": true,
                  "CompleteUrl": "https://example.org/return/f04c2d83-11fa-405b-b6c3-c74559fd8e61",
                  "CancelUrl": "https://example.org/return/f04c2d83-11fa-405b-b6c3-c74559fd8e61",
                  "ViaAgent": false,
                  "Discounts": [
                    {
                      "Name": "Discount descriptor",
                      "Amount": 4.56
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "examples": {
                  "Invalid request error": {
                    "value": {
                      "Code": "INVALID_REQUEST",
                      "Message": "Invalid request syntax",
                      "FieldErrors": [
                        {
                          "Field": "Currency",
                          "Code": "FIELD_MISSING",
                          "Message": "Currency is a required field but was not included in the request"
                        }
                      ]
                    }
                  },
                  "Invalid Currency Error": {
                    "value": {
                      "Code": "INVALID_CURRENCY",
                      "Message": "Provided currency <Currency> is not supported"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Authentication Required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "examples": {
                  "Authentication required error": {
                    "value": {
                      "Code": "AUTHENTICATION_REQUIRED",
                      "Message": "Username/password must be supplied to access this resource"
                    }
                  },
                  "Invalid username/password error": {
                    "value": {
                      "Code": "AUTHENTICATION_REQUIRED",
                      "Message": "Supplied username/password are invalid"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "Code": "NOT_AUTHORIZED",
                  "Message": "User is not permitted to access this resource"
                }
              }
            }
          },
          "409": {
            "description": "Duplicate merchant reference ID",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "Code": "DUPLICATE_MERCHANT_REFERENCE_ID",
                  "Message": "Session with merchant reference <MerchantReference> already exists"
                }
              }
            }
          },
          "415": {
            "description": "Unsupported Media Type",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "Code": "UNSUPPORTED_MEDIA_TYPE",
                  "Message": "Expected content-type: application/json"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "Code": "INTERNAL_SERVER_ERROR",
                  "Message": "The server could not process the request due to an unexpected error"
                }
              }
            }
          }
        }
      }
    },
    "/v1/session/{SessionId}": {
      "get": {
        "tags": [
          "Session"
        ],
        "summary": "Retrieve a Session",
        "operationId": "retrieveSession",
        "security": [
          {
            "basicAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "SessionId",
            "schema": {
              "type": "string",
              "format": "uuid",
              "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",
              "minLength": 36,
              "maxLength": 36,
              "example": "f04c2d83-11fa-405b-b6c3-c74559fd8e61"
            },
            "required": true,
            "description": "Session ID to be retrieved."
          }
        ],
        "responses": {
          "200": {
            "description": "Operation Successful",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Session"
                },
                "examples": {
                  "CREATED": {
                    "value": {
                      "SessionId": "f04c2d83-11fa-405b-b6c3-c74559fd8e61",
                      "State": "CREATED",
                      "MerchantReference": "b14e4557-accb-a829-b829-c21234175467",
                      "Currency": "CAD",
                      "TotalAmount": 43.18,
                      "Items": [
                        {
                          "Name": "Item 1",
                          "Amount": 23,
                          "Quantity": 1
                        },
                        {
                          "Name": "Item 2",
                          "Amount": 10.5,
                          "Quantity": 1
                        },
                        {
                          "Name": "Item 3",
                          "Amount": 5,
                          "Quantity": 1
                        }
                      ],
                      "BillingProfile": {
                        "BillingProfileId": "68bf47c6-787d-4ca2-a904-27870f7e75ef",
                        "Name": "First Last",
                        "Email": "email@example.org",
                        "Phone": "4031231234",
                        "Birthdate": "1999-12-31",
                        "Address": {
                          "Street": "123 Street",
                          "City": "City",
                          "Region": "AB",
                          "Country": "CA",
                          "Postcode": "X0X0X0"
                        }
                      },
                      "ShippingDetails": {
                        "ShippingAmount": 2.34,
                        "DutyAmount": 1.11,
                        "Name": "First Last",
                        "Email": "email@example.org",
                        "Phone": "4031231234",
                        "Address": {
                          "Street": "123 Street",
                          "City": "City",
                          "Region": "AB",
                          "Country": "AR",
                          "Postcode": "X0X0X0"
                        }
                      },
                      "TaxAmount": 1.23,
                      "AutoCapture": true,
                      "CompleteUrl": "https://example.org/return/f04c2d83-11fa-405b-b6c3-c74559fd8e61",
                      "CancelUrl": "https://example.org/return/f04c2d83-11fa-405b-b6c3-c74559fd8e61",
                      "ViaAgent": false
                    }
                  },
                  "PROCESSING": {
                    "value": {
                      "SessionId": "f04c2d83-11fa-405b-b6c3-c74559fd8e61",
                      "State": "PROCESSING",
                      "MerchantReference": "b14e4557-accb-a829-b829-c21234175467",
                      "Currency": "CAD",
                      "TotalAmount": 38.5,
                      "Items": [
                        {
                          "Name": "Item 1",
                          "Amount": 23,
                          "Quantity": 1
                        },
                        {
                          "Name": "Item 2",
                          "Amount": 10.5,
                          "Quantity": 1
                        },
                        {
                          "Name": "Shipping",
                          "Amount": 5,
                          "Quantity": 1
                        }
                      ],
                      "BillingProfile": {
                        "BillingProfileId": "68bf47c6-787d-4ca2-a904-27870f7e75ef",
                        "Name": "First Last",
                        "Email": "email@example.org",
                        "Phone": "4031231234",
                        "Birthdate": "1999-12-31",
                        "Address": {
                          "Street": "123 Street",
                          "City": "City",
                          "Region": "AB",
                          "Country": "CA",
                          "Postcode": "X0X0X0"
                        }
                      },
                      "AutoCapture": true,
                      "CompleteUrl": "https://example.org/return/f04c2d83-11fa-405b-b6c3-c74559fd8e61",
                      "CancelUrl": "https://example.org/return/f04c2d83-11fa-405b-b6c3-c74559fd8e61",
                      "ViaAgent": false
                    }
                  },
                  "REDIRECTED": {
                    "value": {
                      "SessionId": "f04c2d83-11fa-405b-b6c3-c74559fd8e61",
                      "State": "REDIRECTED",
                      "MerchantReference": "b14e4557-accb-a829-b829-c21234175467",
                      "Currency": "CAD",
                      "TotalAmount": 38.5,
                      "Items": [
                        {
                          "Name": "Item 1",
                          "Amount": 23,
                          "Quantity": 1
                        },
                        {
                          "Name": "Item 2",
                          "Amount": 10.5,
                          "Quantity": 1
                        },
                        {
                          "Name": "Shipping",
                          "Amount": 5,
                          "Quantity": 1
                        }
                      ],
                      "BillingProfile": {
                        "BillingProfileId": "68bf47c6-787d-4ca2-a904-27870f7e75ef",
                        "Name": "First Last",
                        "Email": "email@example.org",
                        "Phone": "4031231234",
                        "Birthdate": "1999-12-31",
                        "Address": {
                          "Street": "123 Street",
                          "City": "City",
                          "Region": "AB",
                          "Country": "CA",
                          "Postcode": "X0X0X0"
                        }
                      },
                      "AutoCapture": true,
                      "CompleteUrl": "https://example.org/return/f04c2d83-11fa-405b-b6c3-c74559fd8e61",
                      "CancelUrl": "https://example.org/return/f04c2d83-11fa-405b-b6c3-c74559fd8e61",
                      "RedirectUrl": "https://example.org/some/redirect/url",
                      "ViaAgent": false
                    }
                  },
                  "COMPLETED": {
                    "value": {
                      "SessionId": "f04c2d83-11fa-405b-b6c3-c74559fd8e61",
                      "State": "COMPLETED",
                      "MerchantReference": "b14e4557-accb-a829-b829-c21234175467",
                      "Currency": "CAD",
                      "TotalAmount": 38.5,
                      "Items": [
                        {
                          "Name": "Item 1",
                          "Amount": 23,
                          "Quantity": 1
                        },
                        {
                          "Name": "Item 2",
                          "Amount": 10.5,
                          "Quantity": 1
                        },
                        {
                          "Name": "Shipping",
                          "Amount": 5,
                          "Quantity": 1
                        }
                      ],
                      "BillingProfile": {
                        "BillingProfileId": "68bf47c6-787d-4ca2-a904-27870f7e75ef",
                        "Name": "First Last",
                        "Email": "email@example.org",
                        "Phone": "4031231234",
                        "Birthdate": "1999-12-31",
                        "Address": {
                          "Street": "123 Street",
                          "City": "City",
                          "Region": "AB",
                          "Country": "CA",
                          "Postcode": "X0X0X0"
                        }
                      },
                      "AutoCapture": true,
                      "CompleteUrl": "https://example.org/return/f04c2d83-11fa-405b-b6c3-c74559fd8e61",
                      "CancelUrl": "https://example.org/return/f04c2d83-11fa-405b-b6c3-c74559fd8e61",
                      "ViaAgent": false,
                      "RedirectUrl": "https://example.org/some/redirect/url",
                      "PaymentMethod": "BANK",
                      "PaymentDate": "2021-10-12T16:07:11.656215Z",
                      "Order": {
                        "OrderId": "debe3fdf-14a4-4f43-8e50-0aa6b0730ec3",
                        "State": "Processed",
                        "MerchantReference": "b14e4557-accb-a829-b829-c21234175467",
                        "BankDetails": {
                          "AccountHolder": "Global Collect Services BV",
                          "AccountNumber": "3004 02118 00010129648 92",
                          "BankName": "BNP Paribas",
                          "City": "Paris",
                          "Country": "France",
                          "Iban": "FR7630004021180001012964892",
                          "PaymentReference": "626300095459",
                          "SwiftCode": "BNPAFRPPXXX",
                          "ExtraBankData": "extra data"
                        }
                      }
                    }
                  },
                  "CANCELLED": {
                    "value": {
                      "SessionId": "f04c2d83-11fa-405b-b6c3-c74559fd8e61",
                      "State": "CANCELLED",
                      "MerchantReference": "b14e4557-accb-a829-b829-c21234175467",
                      "Currency": "CAD",
                      "TotalAmount": 38.5,
                      "Items": [
                        {
                          "Name": "Item 1",
                          "Amount": 23,
                          "Quantity": 1
                        },
                        {
                          "Name": "Item 2",
                          "Amount": 10.5,
                          "Quantity": 1
                        },
                        {
                          "Name": "Shipping",
                          "Amount": 5,
                          "Quantity": 1
                        }
                      ],
                      "BillingProfile": {
                        "BillingProfileId": "68bf47c6-787d-4ca2-a904-27870f7e75ef",
                        "Name": "First Last",
                        "Email": "email@example.org",
                        "Phone": "4031231234",
                        "Birthdate": "1999-12-31",
                        "Address": {
                          "Street": "123 Street",
                          "City": "City",
                          "Region": "AB",
                          "Country": "CA",
                          "Postcode": "X0X0X0"
                        }
                      },
                      "AutoCapture": true,
                      "CompleteUrl": "https://example.org/return/f04c2d83-11fa-405b-b6c3-c74559fd8e61",
                      "CancelUrl": "https://example.org/return/f04c2d83-11fa-405b-b6c3-c74559fd8e61",
                      "ViaAgent": false
                    }
                  },
                  "FAILED": {
                    "value": {
                      "SessionId": "f04c2d83-11fa-405b-b6c3-c74559fd8e61",
                      "State": "FAILED",
                      "MerchantReference": "b14e4557-accb-a829-b829-c21234175467",
                      "Currency": "CAD",
                      "TotalAmount": 38.5,
                      "Items": [
                        {
                          "Name": "Item 1",
                          "Amount": 23,
                          "Quantity": 1
                        },
                        {
                          "Name": "Item 2",
                          "Amount": 10.5,
                          "Quantity": 1
                        },
                        {
                          "Name": "Shipping",
                          "Amount": 5,
                          "Quantity": 1
                        }
                      ],
                      "BillingProfile": {
                        "BillingProfileId": "68bf47c6-787d-4ca2-a904-27870f7e75ef",
                        "Name": "First Last",
                        "Email": "email@example.org",
                        "Phone": "4031231234",
                        "Birthdate": "1999-12-31",
                        "Address": {
                          "Street": "123 Street",
                          "City": "City",
                          "Region": "AB",
                          "Country": "CA",
                          "Postcode": "X0X0X0"
                        }
                      },
                      "AutoCapture": true,
                      "CompleteUrl": "https://example.org/return/f04c2d83-11fa-405b-b6c3-c74559fd8e61",
                      "CancelUrl": "https://example.org/return/f04c2d83-11fa-405b-b6c3-c74559fd8e61",
                      "ViaAgent": false
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "Code": "VALIDATION_ERROR",
                  "Message": "Not a valid UUID"
                }
              }
            }
          },
          "401": {
            "description": "Authentication Required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "examples": {
                  "Authentication required error": {
                    "value": {
                      "Code": "AUTHENTICATION_REQUIRED",
                      "Message": "Username/password must be supplied to access this resource"
                    }
                  },
                  "Invalid username/password error": {
                    "value": {
                      "Code": "AUTHENTICATION_REQUIRED",
                      "Message": "Supplied username/password are invalid"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "Code": "NOT_AUTHORIZED",
                  "Message": "User is not permitted to access this resource"
                }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "Code": "SESSION_NOT_FOUND",
                  "Message": "No session exists for session ID f04c2d83-11fa-405b-b6c3-c74559fd8e61"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "Code": "INTERNAL_SERVER_ERROR",
                  "Message": "The server could not process the request due to an unexpected error"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Session"
        ],
        "summary": "Update a session.",
        "operationId": "updateSession",
        "security": [
          {
            "basicAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "SessionId",
            "schema": {
              "type": "string",
              "format": "uuid",
              "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",
              "minLength": 36,
              "maxLength": 36,
              "example": "f04c2d83-11fa-405b-b6c3-c74559fd8e61"
            },
            "required": true,
            "description": "Session ID of the session to be updated"
          }
        ],
        "requestBody": {
          "description": "Session object that needs to be created.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Session"
              },
              "example": {
                "MerchantReference": "b14e4557-accb-a829-b829-c21234175467",
                "Currency": "CAD",
                "Items": [
                  {
                    "Name": "Item 1",
                    "Amount": 23,
                    "Quantity": 1
                  },
                  {
                    "Name": "Item 2",
                    "Amount": 10.5,
                    "Quantity": 1
                  },
                  {
                    "Name": "Item 3",
                    "Amount": 5,
                    "Quantity": 1
                  }
                ],
                "BillingProfile": {
                  "Name": "First Last",
                  "Email": "email@example.org",
                  "Phone": "4031231234",
                  "Birthdate": "1999-12-31",
                  "Address": {
                    "Street": "123 Street",
                    "City": "City",
                    "Region": "AB",
                    "Country": "CA",
                    "Postcode": "X0X0X0"
                  }
                },
                "ShippingDetails": {
                  "ShippingAmount": 20.51,
                  "DutyAmount": 1.11,
                  "Name": "First Last",
                  "Email": "email@example.org",
                  "Phone": "4031231234",
                  "Address": {
                    "Street": "123 Street",
                    "City": "City",
                    "Region": "AB",
                    "Country": "AR",
                    "Postcode": "X0X0X0"
                  }
                },
                "TaxAmount": 1.23,
                "AutoCapture": true,
                "CompleteUrl": "https://example.org/return/{SessionId}",
                "CancelUrl": "https://example.org/return/{SessionId}",
                "Discounts": [
                  {
                    "Name": "Discount descriptor",
                    "Amount": 4.56
                  }
                ]
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Operation successful",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Session"
                },
                "example": {
                  "SessionId": "f04c2d83-11fa-405b-b6c3-c74559fd8e61",
                  "State": "CREATED",
                  "MerchantReference": "b14e4557-accb-a829-b829-c21234175467",
                  "Currency": "CAD",
                  "TotalAmount": 43.18,
                  "Items": [
                    {
                      "Name": "Item 1",
                      "Amount": 23,
                      "Quantity": 1
                    },
                    {
                      "Name": "Item 2",
                      "Amount": 10.5,
                      "Quantity": 1
                    },
                    {
                      "Name": "Item 3",
                      "Amount": 5,
                      "Quantity": 1
                    }
                  ],
                  "BillingProfile": {
                    "BillingProfileId": "68bf47c6-787d-4ca2-a904-27870f7e75ef",
                    "Name": "First Last",
                    "Email": "email@example.org",
                    "Phone": "4031231234",
                    "Birthdate": "1999-12-31",
                    "Address": {
                      "Street": "123 Street",
                      "City": "City",
                      "Region": "AB",
                      "Country": "CA",
                      "Postcode": "X0X0X0"
                    }
                  },
                  "ShippingDetails": {
                    "ShippingAmount": 2.34,
                    "DutyAmount": 1.11,
                    "Name": "First Last",
                    "Email": "email@example.org",
                    "Phone": "4031231234",
                    "Address": {
                      "Street": "123 Street",
                      "City": "City",
                      "Region": "AB",
                      "Country": "AR",
                      "Postcode": "X0X0X0"
                    }
                  },
                  "TaxAmount": 1.23,
                  "AutoCapture": true,
                  "CompleteUrl": "https://example.org/return/f04c2d83-11fa-405b-b6c3-c74559fd8e61",
                  "CancelUrl": "https://example.org/return/f04c2d83-11fa-405b-b6c3-c74559fd8e61",
                  "ViaAgent": false,
                  "Discounts": [
                    {
                      "Name": "Discount descriptor",
                      "Amount": 4.56
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "Code": "VALIDATION_ERROR",
                  "Message": "Not a valid UUID"
                }
              }
            }
          },
          "401": {
            "description": "Authentication Required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "examples": {
                  "Authentication required error": {
                    "value": {
                      "Code": "AUTHENTICATION_REQUIRED",
                      "Message": "Username/password must be supplied to access this resource"
                    }
                  },
                  "Invalid username/password error": {
                    "value": {
                      "Code": "AUTHENTICATION_REQUIRED",
                      "Message": "Supplied username/password are invalid"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "Code": "NOT_AUTHORIZED",
                  "Message": "User is not permitted to access this resource"
                }
              }
            }
          },
          "404": {
            "description": "Session not found for the given ID and Merchant.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "Code": "SESSION_NOT_FOUND",
                  "Message": "No session exists for session ID f04c2d83-11fa-405b-b6c3-c74559fd8e61"
                }
              }
            }
          },
          "409": {
            "description": "Session cannot be updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "examples": {
                  "invalid state": {
                    "summary": "Session not created",
                    "value": {
                      "Code": "INVALID_SESSION_STATE",
                      "Message": "Session state must be CREATED, current state is COMPLETED"
                    }
                  },
                  "duplicate request": {
                    "summary": "Update in progress",
                    "value": {
                      "Code": "DUPLICATE_REQUEST",
                      "Message": "A request with this ID is currently in progress"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/v1/session/{SessionId}/cancel": {
      "delete": {
        "tags": [
          "Session"
        ],
        "summary": "Cancel a non-final Session",
        "operationId": "cancelSession",
        "security": [
          {
            "basicAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "SessionId",
            "schema": {
              "type": "string",
              "format": "uuid",
              "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",
              "minLength": 36,
              "maxLength": 36,
              "example": "f04c2d83-11fa-405b-b6c3-c74559fd8e61"
            },
            "required": true,
            "description": "Session ID to be cancelled."
          }
        ],
        "responses": {
          "204": {
            "description": "Operation Successful"
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "Code": "VALIDATION_ERROR",
                  "Message": "Not a valid UUID"
                }
              }
            }
          },
          "401": {
            "description": "Authentication Required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "examples": {
                  "Authentication required error": {
                    "value": {
                      "Code": "AUTHENTICATION_REQUIRED",
                      "Message": "Username/password must be supplied to access this resource"
                    }
                  },
                  "Invalid username/password error": {
                    "value": {
                      "Code": "AUTHENTICATION_REQUIRED",
                      "Message": "Supplied username/password are invalid"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "Code": "NOT_AUTHORIZED",
                  "Message": "User is not permitted to access this resource"
                }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "Code": "SESSION_NOT_FOUND",
                  "Message": "No session exists for session ID f04c2d83-11fa-405b-b6c3-c74559fd8e61"
                }
              }
            }
          },
          "409": {
            "description": "Conflict",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "Code": "INVALID_SESSION_STATE",
                  "Message": "Session cannot be CANCELLED as it is already COMPLETED"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "Code": "INTERNAL_SERVER_ERROR",
                  "Message": "The server could not process the request due to an unexpected error"
                }
              }
            }
          }
        }
      }
    },
    "/v1/orders/{OrderId}": {
      "get": {
        "tags": [
          "Order"
        ],
        "summary": "Retrieve an Order.",
        "operationId": "retrieveOrder",
        "security": [
          {
            "basicAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "OrderId",
            "schema": {
              "type": "string",
              "format": "uuid",
              "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",
              "minLength": 36,
              "maxLength": 36,
              "example": "cc7236aa-d11b-436c-a29c-d26cecadc847"
            },
            "required": true,
            "description": "Order ID to be retrieved."
          }
        ],
        "responses": {
          "200": {
            "description": "Operation Successful",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Order"
                },
                "examples": {
                  "Typical Order": {
                    "value": {
                      "OrderId": "cc7236aa-d11b-436c-a29c-d26cecadc847",
                      "State": "Processed",
                      "MerchantReference": "1234567890",
                      "SessionId": "f04c2d83-11fa-405b-b6c3-c74559fd8e61"
                    }
                  },
                  "Completed Bank Transfer": {
                    "value": {
                      "OrderId": "cc7236aa-d11b-436c-a29c-d26cecadc847",
                      "State": "Processed",
                      "MerchantReference": "1234567890",
                      "SessionId": "f04c2d83-11fa-405b-b6c3-c74559fd8e61",
                      "BankDetails": {
                        "AccountHolder": "Global Collect Services BV",
                        "AccountNumber": "3004 02118 00010129648 92",
                        "BankName": "BNP Paribas",
                        "City": "Paris",
                        "Country": "France",
                        "Iban": "FR7630004021180001012964892",
                        "PaymentReference": "626300095459",
                        "SwiftCode": "BNPAFRPPXXX",
                        "ExtraBankData": "extra data"
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "Code": "VALIDATION_ERROR",
                  "Message": "Not a valid UUID"
                }
              }
            }
          },
          "401": {
            "description": "Authentication Required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "examples": {
                  "Authentication required error": {
                    "value": {
                      "Code": "AUTHENTICATION_REQUIRED",
                      "Message": "Username/password must be supplied to access this resource"
                    }
                  },
                  "Invalid username/password error": {
                    "value": {
                      "Code": "AUTHENTICATION_REQUIRED",
                      "Message": "Supplied username/password are invalid"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "Code": "NOT_AUTHORIZED",
                  "Message": "User is not permitted to access this resource"
                }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "Code": "ORDER_NOT_FOUND",
                  "Message": "No order exists for order ID cc7236aa-d11b-436c-a29c-d26cecadc847"
                }
              }
            }
          },
          "500": {
            "description": "Server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "Code": "INTERNAL_SERVER_ERROR",
                  "Message": "The server could not process the request due to an unexpected error"
                }
              }
            }
          }
        }
      }
    },
    "/v1/orders": {
      "post": {
        "tags": [
          "Order"
        ],
        "summary": "Create a new order",
        "operationId": "createOrder",
        "security": [
          {
            "basicAuth": []
          }
        ],
        "requestBody": {
          "description": "Order to be created",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Order"
              },
              "examples": {
                "Basic": {
                  "summary": "A basic valid order creation",
                  "value": {
                    "SessionId": "c47fd55e-f6ca-43df-b45e-77d757755e27",
                    "MerchantReference": "SomeReference",
                    "DeviceFingerprint": "b16f631b-931f-4bfb-adb4-402f94c3e49c",
                    "Currency": "EUR",
                    "Items": [
                      {
                        "Name": "Item 1",
                        "Amount": 1,
                        "Quantity": 1
                      },
                      {
                        "Name": "Item 2",
                        "Amount": 2.00,
                        "Quantity": 2
                      }
                    ],
                    "Discounts": [
                      {
                        "Name": "Discount 1",
                        "Amount": 3.00
                      }
                    ],
                    "ShippingDetails": {
                      "ShippingAmount": 4.05,
                      "DutyAmount": 5.05,
                      "Name": "Shipping Name",
                      "Email": "ship@email.com",
                      "Phone": "1234567890",
                      "Address": {
                        "Street": "shipping street",
                        "City": "shipping city",
                        "Region": "shipping region",
                        "Country": "CA",
                        "Postcode": "H0H0H0"
                      }
                    },
                    "TaxAmount": 6.06,
                    "BillingProfile": {
                      "BillingProfileReference": "YourUniqueReference",
                      "Name": "Margery Kershaw",
                      "Email": "margery@email.com",
                      "Phone": "9876543210",
                      "Birthdate": "1980-01-02",
                      "Address": {
                        "Street": "42 Pinnacles Lane",
                        "City": "San Jose",
                        "Region": "CA",
                        "Country": "US",
                        "Postcode": "90210"
                      }
                    },
                    "ViaAgent": true,
                    "AcceptLiability": true,
                    "AutoCapture": true,
                    "OpenContract": true,
                    "NotifyUrl": "http://url.notify",
                    "Meta": {
                      "field": "value",
                      "AnotherField": "Some other value"
                    },
                    "Payment": {
                      "Type": "CARD",
                      "Method": "VISA",
                      "Card": {
                        "StashId": "8d12c2db-ed2f-4e89-b378-1",
                        "ReturnUrl": "http://url.return"
                      }
                    }
                  }
                },
                "Minimal": {
                  "summary": "A request with only the required fields using a full billing profile and payment",
                  "value": {
                    "MerchantReference": "YourUniqueReference",
                    "DeviceFingerprint": "b16f631b-931f-4bfb-adb4-402f94c3e49c",
                    "Currency": "CAD",
                    "Items": [
                      {
                        "Name": "Item 1",
                        "Amount": 1.00,
                        "Quantity": 1
                      }
                    ],
                    "BillingProfile": {
                      "BillingProfileReference": "YourIdentifier",
                      "Name": "Al A. Peterson",
                      "Email": "bill@email.com",
                      "Address": {
                        "Street": "482 Billing St.",
                        "City": "Edmonton",
                        "Country": "ES"
                      }
                    },
                    "Payment": {
                      "Type": "CARD",
                      "Method": "VISA",
                      "Card": {
                        "ReturnUrl": "http://some.return",
                        "StashId": "8d12c2db-ed2f-4e89-b378-1"
                      }
                    }
                  }
                },
                "Full": {
                  "summary": "A request with all optional fields included",
                  "value": {
                    "MerchantReference": "YourUniqueReference",
                    "DeviceFingerprint": "b16f631b-931f-4bfb-adb4-402f94c3e49c",
                    "Currency": "CAD",
                    "Items": [
                      {
                        "Name": "Item 1",
                        "Amount": 1.00,
                        "Quantity": 1
                      },
                      {
                        "Name": "Item 2",
                        "Amount": 2.00,
                        "Quantity": 2
                      }
                    ],
                    "Discounts": [
                      {
                        "Name": "Discount 1",
                        "Amount": 3.00
                      }
                    ],
                    "ShippingDetails": {
                      "ShippingAmount": 4.00,
                      "DutyAmount": 5.00,
                      "Name": "Margery Kershaw",
                      "Email": "marge@email.com",
                      "Phone": "123-456-7890",
                      "Address": {
                        "Street": "45 Shipping Ave",
                        "City": "Vancouver",
                        "Region": "BC",
                        "Country": "CA",
                        "Postcode": "H0H0H0"
                      }
                    },
                    "TaxAmount": 6.00,
                    "BillingProfile": {
                      "BillingReference": "ABillingReference",
                      "Name": "Al A. Peterson",
                      "Email": "bill@email.com",
                      "Phone": "9876543210",
                      "Birthdate": "1980-01-02",
                      "Address": {
                        "Street": "482 Billing St",
                        "City": "Edmonton",
                        "Region": "AK",
                        "Country": "US",
                        "Postcode": "90210"
                      }
                    },
                    "ViaAgent": true,
                    "AcceptLiability": true,
                    "AutoCapture": true,
                    "OpenContract": true,
                    "NotifyUrl": "http://url.notify",
                    "Meta": {
                      "field": "value"
                    },
                    "Payment": {
                      "Type": "CARD",
                      "Method": "VISA",
                      "Card": {
                        "ReturnUrl": "http://some.return",
                        "StashId": "8d12c2db-ed2f-4e89-b378-1"
                      }
                    }
                  }
                },
                "Using ContractId": {
                  "summary": "Using ContractId instead of Payment",
                  "value": {
                    "MerchantReference": "SecondRequest",
                    "DeviceFingerprint": "b16f631b-931f-4bfb-adb4-402f94c3e49c",
                    "Currency": "CAD",
                    "Items": [
                      {
                        "Name": "Item 1",
                        "Amount": 1.00,
                        "Quantity": 1
                      }
                    ],
                    "BillingProfile": {
                      "Name": "Al A. Peterson",
                      "Email": "bill@email.com",
                      "Address": {
                        "Street": "482 Billing St",
                        "City": "Edmonton",
                        "Country": "ES"
                      }
                    },
                    "ContractId": "5570c3fd-c83f-4f63-8731-b501e970cdc2"
                  }
                },
                "BillingProfileReference": {
                  "summary": "Using BillingProfileReference",
                  "value": {
                    "MerchantReference": "ReferenceOnly",
                    "DeviceFingerprint": "b16f631b-931f-4bfb-adb4-402f94c3e49c",
                    "Currency": "CAD",
                    "Items": [
                      {
                        "Name": "Item 1",
                        "Amount": 1.00,
                        "Quantity": 1
                      }
                    ],
                    "BillingProfileReference": "MerchantSuppliedReference",
                    "Payment": {
                      "Type": "CARD",
                      "Method": "VISA",
                      "Card": {
                        "ReturnUrl": "http://some.return",
                        "StashId": "8d12c2db-ed2f-4e89-b378-1"
                      }
                    }
                  }
                },
                "BillingProfileId": {
                  "summary": "Using BillingProfileId",
                  "value": {
                    "MerchantReference": "BillingProfileIdOnly",
                    "DeviceFingerprint": "b16f631b-931f-4bfb-adb4-402f94c3e49c",
                    "Currency": "CAD",
                    "Items": [
                      {
                        "Name": "Item 1",
                        "Amount": 1.00,
                        "Quantity": 1
                      }
                    ],
                    "BillingProfileId": "cd8e09f0-3fc8-4ab2-84c8-8b8ed36db97a",
                    "Payment": {
                      "Type": "CARD",
                      "Method": "VISA",
                      "Card": {
                        "ReturnUrl": "http://some.return",
                        "StashId": "8d12c2db-ed2f-4e89-b378-1"
                      }
                    }
                  }
                },
                "Visa": {
                  "summary": "VISA (Card) payment",
                  "value": {
                    "MerchantReference": "VisaRequest",
                    "DeviceFingerprint": "b16f631b-931f-4bfb-adb4-402f94c3e49c",
                    "Currency": "CAD",
                    "Items": [
                      {
                        "Name": "Item 1",
                        "Amount": 1.00,
                        "Quantity": 1
                      }
                    ],
                    "BillingProfileId": "cd8e09f0-3fc8-4ab2-84c8-8b8ed36db97a",
                    "Payment": {
                      "Type": "CARD",
                      "Method": "VISA",
                      "Card": {
                        "ReturnUrl": "http://some.return",
                        "StashId": "8d12c2db-ed2f-4e89-b378-1"
                      }
                    }
                  }
                },
                "Ideal": {
                  "summary": "iDeal (Online) payment",
                  "value": {
                    "MerchantReference": "IdealRequest",
                    "DeviceFingerprint": "b16f631b-931f-4bfb-adb4-402f94c3e49c",
                    "Currency": "EUR",
                    "Items": [
                      {
                        "Name": "Item 1",
                        "Amount": 1.00,
                        "Quantity": 1
                      }
                    ],
                    "BillingProfileId": "127a2b9b-e140-496a-8c31-351dd42c9deb",
                    "Payment": {
                      "Type": "ONLINE",
                      "Method": "IDEAL",
                      "Online": {
                        "Locale": "en-us",
                        "ReturnUrl": "http://return.url",
                        "Ideal": {
                          "IssuerId": "Knab"
                        }
                      }

                    }
                  }
                },
                "Bank Transfer": {
                  "summary": "Bank Transfer (offline) payment",
                  "value": {
                    "MerchantReference": "BankRequest",
                    "DeviceFingerprint": "b16f631b-931f-4bfb-adb4-402f94c3e49c",
                    "Currency": "EUR",
                    "Items": [
                      {
                        "Name": "Item 1",
                        "Amount": 1.00,
                        "Quantity": 1
                      }
                    ],
                    "BillingProfileId": "e313b6dc-3b4b-436b-ae00-080acfffcb54",
                    "Payment": {
                      "Type": "OFFLINE",
                      "Method": "BANK",
                      "Offline": {
                        "ReturnUrl": "http://return.url"
                      }
                    }
                  }
                }
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Operation successful",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Order"
                },
                "examples": {
                  "Successful Card Payment": {
                    "value": {
                      "SessionId": "c47fd55e-f6ca-43df-b45e-77d757755e27",
                      "MerchantReference": "SomeReference",
                      "DeviceFingerprint": "b16f631b-931f-4bfb-adb4-402f94c3e49c",
                      "Currency": "EUR",
                      "Items": [
                        {
                          "Name": "Item 1",
                          "Amount": 1,
                          "Quanitity": 1
                        },
                        {
                          "Name": "Item 2",
                          "Amount": 2.00,
                          "Quantity": 2
                        }
                      ],
                      "Discounts": [
                        {
                          "Name": "Discount 1",
                          "Amount:": 3.00
                        }
                      ],
                      "ShippingDetails": {
                        "ShippingAmount": 4.05,
                        "DutyAmount": 5.05,
                        "Name": "Shipping Name",
                        "Email": "ship@email.com",
                        "Phone": "1234567890",
                        "Address": {
                          "Street": "shipping street",
                          "City": "shipping city",
                          "Region": "shipping region",
                          "Country": "CA",
                          "Postcode": "H0H0H0"
                        }
                      },
                      "TaxAmount": 6.06,
                      "BillingProfile": {
                        "BillingProfileReference": "Profile reference",
                        "Name": "bill name",
                        "Email": "bill@email.com",
                        "Phone": "9876543210",
                        "Birthdate": "1980-01-02",
                        "Address": {
                          "Street": "billstreet",
                          "City": "billcity",
                          "Region": "billregion",
                          "Country": "US",
                          "Postcode": "90210"
                        }
                      },
                      "Meta": {
                        "field": "value",
                        "AnotherField": "Some other value"
                      },
                      "Payment": {
                        "Type": "CARD",
                        "Method": "VISA",
                        "Card": {

                        }
                      },
                      "State": "PaymentAuthorized",
                      "OrderId": "211eda17-5e0e-4615-a54d-7b10fb58b694",
                      "UnderReview": false,
                      "Chargeback": false,
                      "Reason": "Some_reason",
                      "Expiry": "2022-12-13T01:01:01.01Z",
                      "Action": {
                        "Redirect": "http://some.redirect",
                        "Challenge": "http:///some.challenge",
                        "Display": {
                          "AccountHolder": "Holder",
                          "AccountNumber": "1234567890",
                          "BankName": "Some bank",
                          "City": "City name",
                          "Iban": "NL23ABNA1522775986",
                          "PaymentReference": "Some payment ref",
                          "SwiftCode": "CHASFIHHXXX",
                          "ExtraBankData": "Some extra data"
                        }
                      }
                    }
                  },
                  "Successful Online Payment": {
                    "value": {
                      "SessionId": "c47fd55e-f6ca-43df-b45e-77d757755e27",
                      "MerchantReference": "SomeReference",
                      "DeviceFingerprint": "b16f631b-931f-4bfb-adb4-402f94c3e49c",
                      "Currency": "EUR",
                      "Items": [
                        {
                          "Name": "Item 1",
                          "Amount": 1,
                          "Quanitity": 1
                        },
                        {
                          "Name": "Item 2",
                          "Amount": 2.00,
                          "Quantity": 2
                        }
                      ],
                      "Discounts": [
                        {
                          "Name": "Discount 1",
                          "Amount:": 3.00
                        }
                      ],
                      "ShippingDetails": {
                        "ShippingAmount": 4.05,
                        "DutyAmount": 5.05,
                        "Name": "Shipping Name",
                        "Email": "ship@email.com",
                        "Phone": "1234567890",
                        "Address": {
                          "Street": "shipping street",
                          "City": "shipping city",
                          "Region": "shipping region",
                          "Country": "CA",
                          "Postcode": "H0H0H0"
                        }
                      },
                      "TaxAmount": 6.06,
                      "BillingProfile": {
                        "BillingProfileReference": "Profile reference",
                        "Name": "bill name",
                        "Email": "bill@email.com",
                        "Phone": "9876543210",
                        "Birthdate": "1980-01-02",
                        "Address": {
                          "Street": "billstreet",
                          "City": "billcity",
                          "Region": "billregion",
                          "Country": "US",
                          "Postcode": "90210"
                        }
                      },
                      "Meta": {
                        "field": "value",
                        "AnotherField": "Some other value"
                      },
                      "Payment": {
                        "Type": "CARD",
                        "Method": "VISA",
                        "Online": {

                        }
                      },
                      "State": "PaymentAuthorized",
                      "OrderId": "211eda17-5e0e-4615-a54d-7b10fb58b694",
                      "UnderReview": false,
                      "Chargeback": false,
                      "Reason": "Some_reason",
                      "Expiry": "2022-12-13T01:01:01.01Z",
                      "Action": {
                        "Redirect": "http://some.redirect",
                        "Challenge": "http:///some.challenge",
                        "Display": {
                          "AccountHolder": "Holder",
                          "AccountNumber": "1234567890",
                          "BankName": "Some bank",
                          "City": "City name",
                          "Iban": "NL23ABNA1522775986",
                          "PaymentReference": "Some payment ref",
                          "SwiftCode": "CHASFIHHXXX",
                          "ExtraBankData": "Some extra data"
                        }
                      }
                    }
                  },
                  "Successful Offline Payment": {
                    "value": {
                      "SessionId": "c47fd55e-f6ca-43df-b45e-77d757755e27",
                      "MerchantReference": "SomeReference",
                      "DeviceFingerprint": "b16f631b-931f-4bfb-adb4-402f94c3e49c",
                      "Currency": "EUR",
                      "Items": [
                        {
                          "Name": "Item 1",
                          "Amount": 1,
                          "Quanitity": 1
                        },
                        {
                          "Name": "Item 2",
                          "Amount": 2.00,
                          "Quantity": 2
                        }
                      ],
                      "Discounts": [
                        {
                          "Name": "Discount 1",
                          "Amount:": 3.00
                        }
                      ],
                      "ShippingDetails": {
                        "ShippingAmount": 4.05,
                        "DutyAmount": 5.05,
                        "Name": "Shipping Name",
                        "Email": "ship@email.com",
                        "Phone": "1234567890",
                        "Address": {
                          "Street": "shipping street",
                          "City": "shipping city",
                          "Region": "shipping region",
                          "Country": "CA",
                          "Postcode": "H0H0H0"
                        }
                      },
                      "TaxAmount": 6.06,
                      "BillingProfile": {
                        "BillingProfileReference": "Profile reference",
                        "Name": "bill name",
                        "Email": "bill@email.com",
                        "Phone": "9876543210",
                        "Birthdate": "1980-01-02",
                        "Address": {
                          "Street": "billstreet",
                          "City": "billcity",
                          "Region": "billregion",
                          "Country": "US",
                          "Postcode": "90210"
                        }
                      },
                      "Meta": {
                        "field": "value",
                        "AnotherField": "Some other value"
                      },
                      "Payment": {
                        "Type": "CARD",
                        "Method": "VISA",
                        "Offline": {

                        }
                      },
                      "State": "PaymentAuthorized",
                      "OrderId": "211eda17-5e0e-4615-a54d-7b10fb58b694",
                      "UnderReview": false,
                      "Chargeback": false,
                      "Reason": "Some_reason",
                      "Expiry": "2022-12-13T01:01:01.01Z",
                      "Action": {
                        "Redirect": "http://some.redirect",
                        "Challenge": "http:///some.challenge",
                        "Display": {
                          "AccountHolder": "Holder",
                          "AccountNumber": "1234567890",
                          "BankName": "Some bank",
                          "City": "City name",
                          "Iban": "NL23ABNA1522775986",
                          "PaymentReference": "Some payment ref",
                          "SwiftCode": "CHASFIHHXXX",
                          "ExtraBankData": "Some extra data"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "201" : {
            "description": "Success. Possibly returned if the full order information could not be retrieved.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Order"
                },
                "example": {
                  "OrderId": "ac20f297-0f8c-4ebe-b358-c5eb1c4b5d2b"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "examples": {
                  "Invalid request error": {
                    "value": {
                      "Code": "INVALID_REQUEST",
                      "Message": "Invalid request syntax",
                      "FieldErrors": [
                        {
                          "Field": "MerchantReference",
                          "Code": "FIELD_MISSING",
                          "Message": "MerchantReference is a required field but was not included in the request"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Authentication Required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "examples": {
                  "Authentication required error": {
                    "value": {
                      "Code": "AUTHENTICATION_REQUIRED",
                      "Message": "Username/password must be supplied to access this resource"
                    }
                  },
                  "Invalid username/password error": {
                    "value": {
                      "Code": "AUTHENTICATION_REQUIRED",
                      "Message": "Supplied username/password are invalid"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "Code": "NOT_AUTHORIZED",
                  "Message": "User is not permitted to access this resource"
                }
              }
            }
          },
          "415": {
            "description": "Unsupported Media Type",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "Code": "UNSUPPORTED_MEDIA_TYPE",
                  "Message": "Expected content-type: application/json"
                }
              }
            }
          },
          "500": {
            "description": "Any unexpected Server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "Code": "INTERNAL_SERVER_ERROR",
                  "Message": "The server could not process the request due to an unexpected error"
                }
              }
            }
          }
        }
      }
    },
    "/v1/orders/{OrderId}/capture": {
      "post": {
        "tags": [
          "Order"
        ],
        "summary": "Capture an Order.",
        "operationId": "captureOrder",
        "security": [
          {
            "basicAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "OrderId",
            "schema": {
              "type": "string",
              "format": "uuid",
              "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",
              "minLength": 36,
              "maxLength": 36,
              "example": "cc7236aa-d11b-436c-a29c-d26cecadc847"
            },
            "required": true,
            "description": "Order ID to be captured."
          }
        ],
        "responses": {
          "200": {
            "description": "Operation Successful",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CaptureResultResource"
                },
                "examples": {
                  "Capture Success": {
                    "value": {
                      "OrderState": "PROCESSED"
                    }
                  },
                  "Capture In Progress": {
                    "value": {
                      "OrderState": "PAYMENTAUTHORIZED"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "Code": "VALIDATION_ERROR",
                  "Message": "Not a valid UUID"
                }
              }
            }
          },
          "401": {
            "description": "Authentication Required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "examples": {
                  "Authentication required error": {
                    "value": {
                      "Code": "AUTHENTICATION_REQUIRED",
                      "Message": "Username/password must be supplied to access this resource"
                    }
                  },
                  "Invalid username/password error": {
                    "value": {
                      "Code": "AUTHENTICATION_REQUIRED",
                      "Message": "Supplied username/password are invalid"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "Code": "NOT_AUTHORIZED",
                  "Message": "User is not permitted to access this resource"
                }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "Code": "ORDER_NOT_FOUND",
                  "Message": "No order exists for order ID cc7236aa-d11b-436c-a29c-d26cecadc847"
                }
              }
            }
          },
          "409": {
            "description": "Conflict",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "examples": {
                  "UnderReview": {
                    "value": {
                      "Code": "UnderReview",
                      "Message": "The order is under review and may not be captured until the review is completed."
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "Code": "INTERNAL_SERVER_ERROR",
                  "Message": "The server could not process the request due to an unexpected error"
                }
              }
            }
          }
        }
      }
    },
    "/v1/orders/{OrderId}/cancel": {
      "delete": {
        "tags": [
          "Order"
        ],
        "summary": "Cancel an Order.",
        "operationId": "cancelOrder",
        "security": [
          {
            "basicAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "OrderId",
            "schema": {
              "type": "string",
              "format": "uuid",
              "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",
              "minLength": 36,
              "maxLength": 36,
              "example": "cc7236aa-d11b-436c-a29c-d26cecadc847"
            },
            "required": true,
            "description": "Order ID to be cancelled."
          }
        ],
        "responses": {
          "204": {
            "description": "Operation Successful"
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "Code": "VALIDATION_ERROR",
                  "Message": "Not a valid UUID"
                }
              }
            }
          },
          "401": {
            "description": "Authentication Required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "examples": {
                  "Authentication required error": {
                    "value": {
                      "Code": "AUTHENTICATION_REQUIRED",
                      "Message": "Username/password must be supplied to access this resource"
                    }
                  },
                  "Invalid username/password error": {
                    "value": {
                      "Code": "AUTHENTICATION_REQUIRED",
                      "Message": "Supplied username/password are invalid"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "Code": "NOT_AUTHORIZED",
                  "Message": "User is not permitted to access this resource"
                }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "Code": "ORDER_NOT_FOUND",
                  "Message": "No order exists for order ID cc7236aa-d11b-436c-a29c-d26cecadc847"
                }
              }
            }
          },
          "409": {
            "description": "Conflict - The order is no longer in a state where it can be cancelled",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "examples": {
                  "AlreadyCaptured": {
                    "value": {
                      "Code": "AlreadyCaptured",
                      "Message": "The Reach order has already been captured by the merchant and cannot be cancelled."
                    }
                  },
                  "AlreadyDeclined": {
                    "value": {
                      "Code": "AlreadyDeclined",
                      "Message": "The Reach order has already been declined and cannot be cancelled."
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "Code": "CANCEL_FAILED",
                  "Message": "Cancel failed due to an unexpected error."
                }
              }
            }
          }
        }
      }
    },
    "/v1/orders/{OrderId}/refunds": {
      "post": {
        "tags": [
          "Order"
        ],
        "summary": "Issue a refund against an order",
        "operationId": "createRefund",
        "security": [
          {
            "basicAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "OrderId",
            "schema": {
              "type": "string",
              "format": "uuid",
              "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",
              "minLength": 36,
              "maxLength": 36,
              "example": "cc7236aa-d11b-436c-a29c-d26cecadc847"
            },
            "required": true,
            "description": "Order ID to issue a refund against."
          }
        ],
        "requestBody": {
          "description": "Refund to be issued",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Refund"
              },
              "example": {
                "RefundReference": "YourUniqueReference",
                "Amount": 1.23
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "Operation Successful"
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "Code": "VALIDATION_ERROR",
                  "Message": "Not a valid UUID"
                }
              }
            }
          },
          "401": {
            "description": "Authentication Required",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "examples": {
                  "Authentication required error": {
                    "value": {
                      "Code": "AUTHENTICATION_REQUIRED",
                      "Message": "Username/password must be supplied to access this resource"
                    }
                  },
                  "Invalid username/password error": {
                    "value": {
                      "Code": "AUTHENTICATION_REQUIRED",
                      "Message": "Supplied username/password are invalid"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "Code": "NOT_AUTHORIZED",
                  "Message": "User is not permitted to access this resource"
                }
              }
            }
          },
          "404": {
            "description": "Not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "Code": "ORDER_NOT_FOUND",
                  "Message": "No order exists for order ID cc7236aa-d11b-436c-a29c-d26cecadc847"
                }
              }
            }
          },
          "409": {
            "description": "Conflict - The refund cannot be processed at this time due to the order state, but may be tried again later.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "examples": {
                  "AlreadyCaptured": {
                    "value": {
                      "Code": "ChargebackExists",
                      "Message": "A refund cannot be submitted because there is a chargeback issued against the order."
                    }
                  },
                  "AlreadyDeclined": {
                    "value": {
                      "Code": "OrderStateInvalid",
                      "Message": "The order was not in the correct state - it must be either PROCESSED or DECLINED to initiate a refund"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Server error.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "Code": "REFUND_FAILED",
                  "Message": "Refund failed due to an unexpected error"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "Session": {
        "type": "object",
        "properties": {
          "SessionId": {
            "description": "Returned UUID representing the Session",
            "type": "string",
            "format": "uuid",
            "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",
            "minLength": 36,
            "maxLength": 36,
            "readOnly": true
          },
          "State": {
            "description": "Returned state of the Session.",
            "type": "string",
            "enum": [
              "CREATED",
              "REDIRECTED",
              "COMPLETED",
              "CANCELLED",
              "FAILED"
            ],
            "readOnly": true
          },
          "MerchantReference": {
            "description": "Unique identifier provided by merchant.",
            "type": "string",
            "minLength": 1
          },
          "Currency": {
            "description": "Three-character ISO-4217 currency code used to process the payment.",
            "type": "string"
          },
          "TotalAmount": {
            "description": "Sum of all item amounts, TaxAmount, ShippingDetails.ShippingAmount and ShippingDetails.DutyAmount, minus the total of all Discounts",
            "type": "number",
            "format": "float",
            "readOnly": true
          },
          "Items": {
            "description": "List of items to be paid. At least one Item must be supplied.",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Item"
            }
          },
          "AutoCapture": {
            "description": "Indicator used to determine if an Order is auto captured after authorization.",
            "type": "boolean"
          },
          "CompleteUrl": {
            "description": "Merchant URL to redirect a user to upon completion at a third party payment processor. This may contain \"{SessionId}\" anywhere in the string to have the SessionId embedded in the url.",
            "type": "string",
            "example": "https://example.org/return, https://example.org/return?param=12345&hello=world, https://example.org/return/{SessionId}, https://example.org/{SessionId}/return, https://example.org/return?SessionId={SessionId}"
          },
          "CancelUrl": {
            "description": "Merchant URL to redirect a user to after cancelling on a third party payment processor. This may contain \"{SessionId}\" anywhere in the string to have the SessionId embedded in the url.",
            "type": "string",
            "example": "https://example.org/return, https://example.org/return?param=12345&hello=world, https://example.org/return/{SessionId}, https://example.org/{SessionId}/return, https://example.org/return?SessionId={SessionId}"
          },
          "ViaAgent": {
            "description": "Indicates that this Session is being made by an agent, and not the end consumer. If false or not present, the Session is assumed to be placed by the end consumer.",
            "type": "boolean"
          },
          "BillingProfileId": {
            "description": "Corresponds to the BillingProfileId returned in a BillingProfile. Can be passed in to reference an existing billing profile instead of creating a new one. Exactly one of BillingProfile, BillingProfileId or BillingprofileReference are required.",
            "type": "string",
            "format": "uuid",
            "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",
            "minLength": 36,
            "maxLength": 36,
            "writeOnly": true
          },
          "BillingProfileReference": {
            "description": "Merchant supplied reference that uniquely maps to a BillingProfile. Can be passed in to reference an existing BillingProfile. Exactly one of BillingProfile, BillingProfileId or BillingprofileReference are required.",
            "type": "string",
            "writeOnly": true
          },
          "BillingProfile": {
            "description": "Full consumer billing information. Supplying this creates a new BillingProfile that can be referenced in future requests with either the supplied BillingProfileReference or the generated BillingProfileId. Exactly one of BillingProfile, BillingProfileId or BillingprofileReference are required.",
            "$ref": "#/components/schemas/BillingProfile"
          },
          "ShippingDetails": {
            "description": "Consumer shipping information. Required if the session is for physical goods.",
            "$ref": "#/components/schemas/ShippingDetails"
          },
          "TaxAmount": {
            "description": "Taxes for the entire order. Currency is defined by parent object.",
            "type": "number"
          },
          "Order": {
            "description": "Order information, returned when a session is completed.",
            "readOnly": true,
            "$ref": "#/components/schemas/Order"
          },
          "Discounts": {
            "type": "array", 
            "items": {
              "$ref": "#/components/schemas/Discount"
            }
          },
          "RateOfferId": {
            "description": "The 36 character GUID for a guaranteed foreign exchange rate. If omitted, the rate will be determined at the time of settlement.",
            "type": "string",
            "format": "uuid",
            "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",
            "minLength": 36,
            "maxLength": 36
          },
          "Meta": {
            "$ref": "#/components/schemas/Meta"

          }
        },
        "required": [
          "MerchantReference",
          "Currency",
          "Items",
          "AutoCapture",
          "CompleteUrl",
          "CancelUrl"
        ]
      },
      "Order": {
        "description": "A Reach order, representing a payment attempt. See https://docs.withreach.com/docs/states-and-events for information on the order lifecycle. If created by a session, the presence indicates the session is completed and the payment is being processed.",
        "type": "object",
        "properties": {
          "OrderId": {
            "description": "UUID identifying the individual Order.",
            "type": "string",
            "format": "uuid",
            "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",
            "minLength": 36,
            "maxLength": 36,
            "readOnly": true
          },
          "State": {
            "description": "Order state. See: https://docs.withreach.com/docs/states-and-events",
            "type": "string",
            "enum": [
              "Authenticating",
              "Pending",
              "Processing",
              "PaymentAuthorized",
              "Processed",
              "ProcessingFailed",
              "Cancelled",
              "Declined"
            ],
            "readOnly": true
          },
          "MerchantReference": {
            "description": "Unique identifier provided by merchant.",
            "type": "string",
            "minLength": 1
          },
          "BillingProfile": {
            "description": "Full consumer billing information. Supplying this creates a new BillingProfile that can be referenced in future requests with either the supplied BillingProfileReference or the generated BillingProfileId. Exactly one of BillingProfile, BillingProfileId or BillingprofileReference are required.",
            "$ref": "#/components/schemas/BillingProfile"
          },
          "BillingProfileId": {
            "description": "Corresponds to the BillingProfileId returned in a BillingProfile. Can be passed in to reference an existing billing profile instead of creating a new one. Exactly one of BillingProfile, BillingProfileId or BillingprofileReference are required.",
            "type": "string",
            "format": "uuid",
            "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",
            "minLength": 36,
            "maxLength": 36,
            "writeOnly": true
          },
          "BillingProfileReference": {
            "description": "Merchant supplied reference that uniquely maps to a BillingProfile. Can be passed in to reference an existing BillingProfile. Exactly one of BillingProfile, BillingProfileId or BillingprofileReference are required.",
            "type": "string",
            "writeOnly": true
          },
          "Currency": {
            "description": "Three-character ISO-4217 currency code used to process the payment.",
            "type": "string"
          },
          "Items": {
            "description": "List of items to be paid. At least one Item must be supplied in requests. The sum total of the item amounts will be added to the TotalAmount",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Item"
            }
          },
          "Payment": {
            "description": "Payment information, such as card or offline data. Required in requests if ContractId is not present.",
            "$ref": "#/components/schemas/Payment"
          },
          "ContractId": {
            "description": "Reach-generated ID of an existing contract. Can be supplied in lieu of a Payment object. Will be returned in the response if OpenContract is set to true.",
            "type": "string",
            "format": "uuid",
            "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",
            "minLength": 36,
            "maxLength": 36
          },
          "DeviceFingerprint": {
            "description": "Device fingerprint - see https://docs.withreach.com/reference/fingerprint-1",
            "type": "string",
            "writeOnly": true
          },
          "Discounts": {
            "description": "List of discounts. The sum of the discounts amounts will be subtracted from the TotalAmount",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Discount"
            }
          },
          "ShippingDetails": {
            "$ref": "#/components/schemas/ShippingDetails"
          },
          "TaxAmount": {
            "description": "Tax to be applied to the order. In the consumer currency, max precision of 2 digits. TaxAmount will be added to the TotalAmount.",
            "type": "number"
          },
          "ViaAgent": {
            "description": "Indicates that this order is being made by an agent, and not the end consumer. If false or not present, the order is assumed to be placed by the end consumer.",
            "type": "boolean",
            "writeOnly": true
          },
          "AcceptLiability": {
            "description": "If true, the merchant accepts financial liability for this order.",
            "type": "boolean",
            "writeOnly": true
          },
          "AutoCapture": {
            "description": "If true or the payment method used by the consumer does not support pre-authorization, the payment will be completed. If false or not present, and the payment method supports pre-authorization, the order will be left in the PaymentAuthorized state and the merchant must capture the order using a capture request.",
            "type": "boolean",
            "writeOnly": true
          },
          "OpenContract": {
            "description": "If true, a contract (used for recurring billing, subscriptions, stored payment options, etc.) will be opened if possible. If false or not present, the order will not open a contract.",
            "type": "boolean",
            "writeOnly": true
          },
          "Meta": {
            "$ref": "#/components/schemas/Meta"
          },
          "UnderReview": {
            "description": "This will be returned as true if a fraud review is in progress for the order. Payment cannot be processed until the review has been completed.",
            "type": "boolean",
            "readOnly": true
          },
          "Chargeback": {
            "description": "This will be returned as true if a chargeback has been issued against the order. An outstanding chargeback disables the ability to submit a refund against the order.",
            "type": "boolean",
            "readOnly": true
          },
          "Reason": {
            "description": "Gives a reason for an order to be in a given state.",
            "type": "string",
            "readOnly": true
          },
          "Expiry": {
            "description": "If the order was created with Capture false, and the payment is authorized, the RFC 3339 time at which this order expires. If further authentication is required, this is the time by which that authentication must be completed.",
            "type": "string",
            "readOnly": true
          },
          "Action": {
            "readOnly": true,
            "$ref": "#/components/schemas/Action"
          },
          "Times": {
            "readOnly": true,
            "$ref": "#/components/schemas/Times"
          }
        },
        "required": [
          "OrderId",
          "State",
          "MerchantReference",
          "SessionId"
        ]
      },
      "Item": {
        "description": "A line item, representing one or more digital or physical goods that a user is paying for.",
        "type": "object",
        "properties": {
          "Name": {
            "description": "Free-text field to identify a line item.",
            "type": "string"
          },
          "Amount": {
            "description": "Amount of item to be paid. Currency is defined by parent object.",
            "type": "number",
            "format": "float"
          },
          "Quantity": {
            "description": "Quantity of the item to be paid.",
            "type": "integer"
          }
        },
        "required": [
          "Name",
          "Amount",
          "Quantity"
        ]
      },
      "Discount": {
        "description": "A merchant-supplied discount on the entire order. The amount will be subtracted from TotalAmount",
        "type": "object",
        "properties": {
          "Name": {
            "description": "A free-text name to describe the discount",
            "type": "string"
          },
          "Amount": {
            "description": "Flat amount of the discount to be applied.",
            "type": "number",
            "format": "float"
          }
        },
        "required": [
          "Name",
          "Amount"
        ]
      },
      "BillingProfile": {
        "description": "Billing details associated with the payment. Some fields may be required or optional depending on the Country in BillingProfile.Address. See: https://docs.withreach.com/reference/country-specific-fields-1",
        "type": "object",
        "properties": {
          "BillingProfileId": {
            "description": "A UUID for a given BillingProfile object present in Reach. This can be used later to reference an existing consumer",
            "type": "string",
            "readOnly": true
          },
          "BillingProfileReference": {
            "description": "A unique merchant-supplied consumer identifier. If supplied, this can be used later to reference an existing consumer.",
            "type": "string"
          },
          "Name": {
            "description": "Customers given name.",
            "type": "string"
          },
          "Company": {
            "description": "Customer's company name.",
            "type": "string"
          },
          "Email": {
            "description": "Customers email address",
            "type": "string"
          },
          "Address": {
            "$ref": "#/components/schemas/Address"
          },
          "Phone": {
            "description": "Customer's phone number.",
            "type": "string"
          },
          "Birthdate": {
            "description": "Customer's birthdate (format yyyy-MM-dd). Required depending on the Country.",
            "type": "string"
          },
          "NationalIdentifier": {
            "description": "National ID, such as SSN or CPF. Required depending on the Country.",
            "type": "string"
          }
        },
        "required": [
          "Name",
          "Email",
          "Address",
          "City",
          "Country"
        ]
      },
      "ShippingDetails": {
        "description": "Customer's shipping details. This is required if physical goods are shipped along with the order.",
        "type": "object",
        "properties": {
          "ShippingAmount": {
            "description": "Total amount excluding taxes and duties. Currency is defined by parent object.",
            "type": "number"
          },
          "DutyAmount": {
            "description": "Duty for the entire order. Currency is defined by parent object.",
            "type": "number"
          },
          "Name": {
            "description": "Customers given name.",
            "type": "string"
          },
          "Company": {
            "description": "Company's name.",
            "type": "string"
          },
          "Email": {
            "description": "Customers email address",
            "type": "string"
          },
          "Address": {
            "$ref": "#/components/schemas/Address"
          }
        },
        "required": [
          "Price",
          "Tax",
          "Duty",
          "Name",
          "Address",
          "City",
          "Country"
        ]
      },
      "Address": {
        "description": "A shipping or billing address",
        "type": "object",
        "properties": {
          "Street": {
            "description": "Customer's street address.",
            "type": "string"
          },
          "City": {
            "description": "Customer's city.",
            "type": "string"
          },
          "Region": {
            "description": "Customer's state or province (ISO-3166-2 subdivision code).",
            "type": "string"
          },
          "Country": {
            "description": "Customer's country (upper-case ISO 3166 alpha-2 country code).",
            "type": "string"
          },
          "Postcode": {
            "description": "Customer's zip/postal code.",
            "type": "string"
          }
        }
      },
      "BankDetails": {
        "type": "object",
        "properties": {
          "AccountHolder": {
            "description": "The name of the receiving account holder, if available",
            "type": "string",
            "minLength": 1
          },
          "AccountNumber": {
            "description": "The account number receiving the payment",
            "type": "string",
            "minLength": 1
          },
          "BankName": {
            "description": "The name of the bank receiving the payment",
            "type": "string",
            "minLength": 1
          },
          "City": {
            "description": "City of processing bank",
            "type": "string",
            "minLength": 1
          },
          "Country": {
            "description": "Country of processing bank",
            "type": "string",
            "minLength": 1
          },
          "Iban": {
            "description": "International Bank Account Number",
            "type": "string",
            "minLength": 1
          },
          "PaymentReference": {
            "description": "The merchant order number",
            "type": "string",
            "minLength": 1
          },
          "SwiftCode": {
            "description": "The unique bank identifier",
            "type": "string",
            "minLength": 1
          },
          "ExtraBankData": {
            "description": "Country-specific bank information (eg. ABA)",
            "type": "string",
            "minLength": 1
          }
        }
      },
      "Payment": {
        "description": "Object representing the payment information for an order",
        "type": "object",
        "properties": {
          "Type": {
            "description": "Payment classification",
            "type": "string",
            "enum": [
              "CARD",
              "ONLINE",
              "OFFLINE"
            ]
          },
          "Method": {
            "description": "Specific payment method as returned in Name of getPaymentMethods. See: https://docs.withreach.com/reference/getpaymentmethods",
            "type": "string",
            "example": "VISA, IDEAL, BANK"
          },
          "Online": {
            "description": "Represents online payment methods, such as Paypal or Klarna. Present if Payment.Type is ONLINE, otherwise absent.",
            "$ref": "#/components/schemas/Online"
          },
          "Card": {
            "description": "Represents card payment methods, such as Visa or Mastercard. Present if Payment.Type is CARD, otherwise absent.",
            "$ref": "#/components/schemas/Card"
          },
          "Offline": {
            "description": "Represents offline payment methods, such as Bank Transfers. Present if Payment.Type is OFFLINE, otherwise absent.",
            "$ref": "#/components/schemas/Offline"
          }
        }
      },
      "Online": {
        "description": "Contains payment details for Online payment types.",
        "type": "object",
        "properties": {
          "Locale": {
            "description": "Locale for redirects. May need to be customized to a specific payment type.",
            "type": "string",
            "example": "en-us"
          },
          "ReturnUrl": {
            "description": "Merchant URL to redirect a user to upon completion at a third party payment processor. This may contain \"{SessionId}\" anywhere in the string to have the SessionId embedded in the url.",
            "type": "string",
            "example": "https://example.org/return, https://example.org/return?param=12345&hello=world, https://example.org/return/{SessionId}, https://example.org/{SessionId}/return, https://example.org/return?SessionId={SessionId}"
          },
          "Ideal": {
            "$ref": "#/components/schemas/Ideal"
          }
        }
      },
      "Ideal": {
        "description": "Payment details specific to iDeal.",
        "type": "object",
        "properties": {
          "IssuerId" : {
            "description": "iDeal-specific Issuer ID, to be passed to the processor",
            "type": "string",
            "writeOnly": true
          }
        }
      },
      "Paypal": {
        "description": "Payment details specific to PayPal.",
        "type": "object",
        "properties": {
          "Email": {
            "description": "Email associated with the customer's PayPal account, as they entered in a redirect",
            "type": "string",
            "readOnly": true
          }
        }
      },
      "Card": {
        "description": "Payment details for Card type. Must be supplied if Payment.Type is CARD",
        "type": "object",
        "properties": {
          "StashId": {
            "description": "Details of a card payment returned from a stash call. See: https://docs.withreach.com/docs/stash",
            "type": "string",
            "writeOnly": true
          },
          "ReturnUrl": {
            "description": "Merchant URL to redirect a user to upon completion of a 3DS Challenge. This may contain \"{SessionId}\" anywhere in the string to have the SessionId embedded in the url.",
            "type": "string",
            "example": "https://example.org/return, https://example.org/return?param=12345&hello=world, https://example.org/return/{SessionId}, https://example.org/{SessionId}/return, https://example.org/return?SessionId={SessionId}",
            "writeOnly": true
          },
          "Bin": {
            "description": "First 6 digits of a card number. Used for display purposes",
            "type": "string",
            "readOnly": true
          },
          "LastFour": {
            "description": "Last 4 digits of a card number. Used for display purposes.",
            "type": "string",
            "readOnly": true
          },
          "Expiry": {
            "readOnly": true,
            "$ref": "#/components/schemas/Expiry"
          }
        }
      },
      "Expiry": {
        "description": "Card expiry information",
        "type": "object",
        "properties": {
          "Month": {
            "description": "Month the card expires in. Returned as 2-character numeric.",
            "type": "string"
          },
          "Year": {
            "description": "Year the card expires. Returned as a 4-character numeric.",
            "type": "string"
          }
        }
      },
      "Offline": {
        "description": "Offline payment information.",
        "type": "object",
        "properties": {
          "ReturnUrl": {
            "description": "Merchant URL to redirect a user to upon completion at a third party payment processor. This may contain \"{SessionId}\" anywhere in the string to have the SessionId embedded in the url.",
            "type": "string",
            "example": "https://example.org/return, https://example.org/return?param=12345&hello=world, https://example.org/return/{SessionId}, https://example.org/{SessionId}/return, https://example.org/return?SessionId={SessionId}",
            "writeOnly": true
          }
        }
      },
      "Action": {
        "description": "If additional action must be taken to proceed with a request, this object contains information about the required action.",
        "type": "object",
        "properties": {
          "Redirect": {
            "description": "URL to redirect a consumer on completion",
            "type": "string"
          },
          "Challenge": {
            "description": "The URL to use for iframe-embedded authentication (ex. 3-DSecure v2, WeChat QR code, etc.)",
            "type": "string"
          },
          "Display": {
            "$ref": "#/components/schemas/Display"
          }
        }
      },
      "Display": {
        "description": "A freeform JSON object which, in the context of the specified request, gives the necessary information for a consumer to proceed. See https://docs.withreach.com/docs/display-parameters.",
        "type": "object",
        "properties": {
          "AccountHolder": {
            "type": "string"
          },
          "AccountNumber": {
            "type": "string"
          },
          "BankName": {
            "type": "string"
          },
          "City": {
            "type": "string"
          },
          "Iban": {
            "type": "string"
          },
          "PaymentReference": {
            "type": "string"
          },
          "SwiftCode": {
            "type": "string"
          },
          "ExtraBankData": {
            "type": "string"
          }
        }
      },
      "Times": {
        "description": "Gives times of various order state transitions",
        "type": "object",
        "properties": {
          "Created": {
            "description": "The RFC 3339 timestamp at which the order was created.",
            "type": "string"
          },
          "Authorized": {
            "description": "The RFC 3339 timestamp at which the orders payment was authorized. This will be null if the payment has not yet been authorized or the payment method used for the order does not support pre-authorization (eg. Boleto).",
            "type": "string"
          },
          "Processed": {
            "description": "The RFC 3339 timestamp at which the order's payment was processed. This will be null if the order's payment has not been processed yet or has failed to be processed.",
            "type": "string"
          }
        }
      },
      "Error": {
        "type": "object",
        "properties": {
          "Code": {
            "description": "Identifying code of a presented error.",
            "type": "string"
          },
          "Message": {
            "description": "Details of a presented error.",
            "type": "string"
          },
          "FieldErrors": {
            "description": "A list of field errors.",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/FieldErrors"
            }
          }
        },
        "required": [
          "Code",
          "Message"
        ]
      },
      "FieldErrors": {
        "type": "object",
        "properties": {
          "Field": {
            "description": "Field associated with the error.",
            "type": "string"
          },
          "Code": {
            "description": "Identifying code of a presented field error.",
            "type": "string"
          },
          "Message": {
            "description": "Details of a presented field error.",
            "type": "string"
          }
        },
        "required": [
          "Field",
          "Code",
          "Message"
        ]
      },
      "CaptureResultResource": {
        "type": "object",
        "properties": {
          "OrderState": {
            "description": "State which the order is in.",
            "type": "string",
            "enum": [
              "PROCESSED",
              "PAYMENTAUTHORIZED"
            ]
          }
        },
        "required": [
          "OrderState"
        ]
      },
      "Refund": {
        "type": "object",
        "properties": {
          "RefundId": {
            "description": "Reach-generated unique id of a refund",
            "type": "string",
            "format": "uuid",
            "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",
            "minLength": 36,
            "maxLength": 36,
            "readOnly": true
          },
          "Amount": {
            "description": "Amount of the refund. Must be at most the total value of the original order, minus any other refunds.",
            "type": "number",
            "format": "float"
          },
          "State": {
            "description": "Refund state. See: https://docs.withreach.com/docs/states-and-events#refund-states",
            "type": "string",
            "enum": [
              "InProgress",
              "Succeeded",
              "Failed"
            ],
            "readOnly": true
          },
          "RefundReference": {
            "description": "A merchant-supplied reference ID. This must be unique within the order for the given refund",
            "type": "string"
          },
          "Times": {
            "readOnly": true,
            "$ref": "#/components/schemas/Times"
          }
        }
      },
      "Meta": {
        "description": "Any optional metadata to be included. Can be a simple reference ID or some complex object containing multiple values, as long as it is valid JSON.",
        "type": "object",
        "example": "{\"Custom field\": \"Any value\"}"
      }
    },
    "securitySchemes": {
      "basicAuth": {
        "type": "http",
        "scheme": "basic"
      }
    }
  }
}
